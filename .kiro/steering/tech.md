# 技術スタック & 開発ガイドライン

## 技術スタック

- **拡張機能フレームワーク**: Chrome 拡張機能 Manifest V3
- **言語**:
  - JavaScript (ES6+)
  - HTML5
  - CSS3
- **ストレージ**: Chrome Storage API (sync)
- **外部依存なし**: ピュアなバニラ JavaScript 実装

## コードスタイル & 規約

- **JavaScript**:

  - ES6+ 機能を優先（アロー関数、テンプレートリテラルなど）
  - メインコンポーネントにはクラスベースのアーキテクチャ
  - キャメルケースの説明的な変数名と関数名
  - try/catch ブロックによる包括的なエラー処理
  - 異なるログレベルを持つ詳細なロギング
  - すべてのクラスと公開メソッドに JSDoc コメント

- **CSS**:

  - クラスには BEM に似た命名規則
  - YouTube のスタイルをオーバーライドするために !important でマークされたルール
  - レスポンシブデザイン用のメディアクエリ
  - クロスブラウザ互換性のためのベンダープレフィックス
  - テーマの一貫性のための CSS 変数

- **HTML**:
  - セマンティック HTML5 要素
  - アクセシビリティ属性 (aria-\*)
  - UTF-8 エンコーディング

## 開発ワークフロー

### ビルド & テスト

この拡張機能はビルドプロセスを必要としません。ファイルは直接 Chrome にロードしてテストできます：

1. Chrome を開き、`chrome://extensions/` に移動
2. 「デベロッパーモード」を有効にする
3. 「パッケージ化されていない拡張機能を読み込む」をクリックし、拡張機能のディレクトリを選択
4. YouTube ページでテスト

### テスト

- さまざまな YouTube ページレイアウトでの手動テスト
- テストファイルは `test-` で始まり、機能ごとに整理されている
- 対応する `run-*-tests.js` ファイルを使用してテストを実行

### デバッグ

- デバッグには Chrome DevTools を使用
- 拡張機能のログはコンソールで確認（「YouTube Theater Mode:」で始まる）
- バックグラウンドサービスのログは拡張機能のバックグラウンドページで確認可能

## 一般的なコマンド

- **拡張機能の読み込み**: Chrome で、拡張機能 > パッケージ化されていない拡張機能を読み込む > ディレクトリを選択
- **拡張機能の再読み込み**: chrome://extensions/ の拡張機能カードの更新アイコンをクリック
- **バックグラウンドログの表示**: chrome://extensions/ の「バックグラウンドページ」リンクをクリック
- **テストの実行**: 対応するテスト HTML ファイルをブラウザで開く
